# ç³»ç»Ÿè¦æ±‚

æœ¬æ–‡æ¡£æè¿°äº†è¿è¡Œ Scintirete çš„ç³»ç»Ÿè¦æ±‚å’Œæ¨èé…ç½®ã€‚

## ğŸ“‹ åŸºæœ¬è¦æ±‚

### æ“ä½œç³»ç»Ÿæ”¯æŒ

Scintirete æ”¯æŒä»¥ä¸‹æ“ä½œç³»ç»Ÿï¼š

| æ“ä½œç³»ç»Ÿ | æ¶æ„ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ |
|---------|------|---------|---------|
| **Linux** | x86_64 | Ubuntu 18.04, CentOS 7 | Ubuntu 20.04+, CentOS 8+ |
| **Linux** | ARM64 | Ubuntu 18.04, CentOS 7 | Ubuntu 20.04+, CentOS 8+ |
| **Linux** | ARM v7 | Raspberry Pi OS (32-bit) | Raspberry Pi OS (latest) |
| **Linux** | ARM v6 | Raspberry Pi OS (32-bit) | Raspberry Pi OS (latest) |
| **macOS** | x86_64 | macOS 10.15 (Catalina) | macOS 12.0+ (Monterey) |
| **macOS** | ARM64 (M1/M2) | macOS 11.0 (Big Sur) | macOS 12.0+ (Monterey) |
| **Windows** | x86_64 | Windows 10 | Windows 11 |

### ğŸ“ æ ‘è“æ´¾ä¸“é¡¹æ”¯æŒ

Scintirete ä¸ºæ ‘è“æ´¾è®¾å¤‡æä¾›äº†åŸç”Ÿä¼˜åŒ–æ”¯æŒï¼š

| æ ‘è“æ´¾å‹å· | CPU æ¶æ„ | æ”¯æŒçš„æ“ä½œç³»ç»Ÿ | äºŒè¿›åˆ¶åŒ… | Docker æ¶æ„ |
|-----------|----------|---------------|----------|-------------|
| **Pi 1, Zero, Zero W** | ARMv6 (32-bit) | Raspberry Pi OS (32-bit) | `scintirete-linux-arm-pi1.tar.gz` | `linux/arm/v6` |
| **Pi 2 (Rev 1.1)** | ARMv7 (32-bit) | Raspberry Pi OS (32-bit) | `scintirete-linux-arm-pi23.tar.gz` | `linux/arm/v7` |
| **Pi 3, 4, 5, Zero 2W** | ARMv8 (64-bit capable) | Raspberry Pi OS (32-bit) | `scintirete-linux-arm-pi23.tar.gz` | `linux/arm/v7` |
| **Pi 3, 4, 5, Zero 2W** | ARMv8 (AArch64) | Raspberry Pi OS (64-bit) | `scintirete-linux-arm64-pi45.tar.gz` | `linux/arm64` |

**æ ‘è“æ´¾æ€§èƒ½å‚è€ƒï¼š**
- **Pi 4 (4GB+)**: é€‚åˆä¸­å°å‹å‘é‡æ•°æ®åº“ï¼ˆ< 100ä¸‡å‘é‡ï¼‰
- **Pi 5 (8GB)**: é€‚åˆè¾ƒå¤§è§„æ¨¡éƒ¨ç½²ï¼ˆ100ä¸‡+ å‘é‡ï¼‰
- **Pi Zero ç³»åˆ—**: é€‚åˆè¾¹ç¼˜è®¡ç®—å’ŒåŸå‹éªŒè¯
- **æ¨èå­˜å‚¨**: microSD å¡ï¼ˆClass 10 æˆ– A1/A2ï¼‰ï¼Œæˆ– USB 3.0 SSD

### ç¡¬ä»¶è¦æ±‚

#### æœ€ä½é…ç½®
- **CPU**: 1 æ ¸å¿ƒ (x86_64ã€ARM64ã€ARMv7 æˆ– ARMv6)
- **å†…å­˜**: 512 MB RAM
- **å­˜å‚¨**: 100 MB å¯ç”¨ç£ç›˜ç©ºé—´
- **ç½‘ç»œ**: æ”¯æŒ TCP/IP

#### æ¨èé…ç½®
- **CPU**: 2+ æ ¸å¿ƒ (x86_64ã€ARM64ã€ARMv7)
- **å†…å­˜**: 2 GB+ RAM
- **å­˜å‚¨**: 1 GB+ SSD å­˜å‚¨
- **ç½‘ç»œ**: åƒå…†ä»¥å¤ªç½‘

#### æ ‘è“æ´¾ç‰¹å®šé…ç½®å»ºè®®

| æ ‘è“æ´¾å‹å· | æ¨èå†…å­˜é…ç½® | é€‚åˆçš„æ•°æ®è§„æ¨¡ | å­˜å‚¨å»ºè®® |
|-----------|-------------|---------------|----------|
| **Pi 1, Zero, Zero W** | 512MB (ç³»ç»Ÿé™åˆ¶) | < 10ä¸‡å‘é‡ | microSD Class 10 |
| **Pi 2** | 1GB (ç³»ç»Ÿé™åˆ¶) | < 50ä¸‡å‘é‡ | microSD Class 10 + USB å­˜å‚¨ |
| **Pi 3** | 1GB (ç³»ç»Ÿé™åˆ¶) | < 50ä¸‡å‘é‡ | microSD Class 10 + USB 3.0 SSD |
| **Pi 4 (4GB)** | 4GB | < 100ä¸‡å‘é‡ | USB 3.0 SSD æ¨è |
| **Pi 4 (8GB)** | 8GB | 100ä¸‡+ å‘é‡ | USB 3.0 SSD æ¨è |
| **Pi 5 (4GB/8GB)** | 4GB/8GB | 100ä¸‡+ å‘é‡ | USB 3.0 SSD æˆ– NVMe |

## ğŸ§® å†…å­˜è®¡ç®—æŒ‡å—

### å‘é‡å­˜å‚¨å†…å­˜éœ€æ±‚

Scintirete å°†æ‰€æœ‰å‘é‡æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ä»¥ä¿è¯æœ€ä½³æ€§èƒ½ã€‚å†…å­˜éœ€æ±‚ä¸»è¦ç”±ä»¥ä¸‹å› ç´ å†³å®šï¼š

```
æ€»å†…å­˜éœ€æ±‚ = å‘é‡æ•°æ® + HNSW ç´¢å¼• + å…ƒæ•°æ® + ç³»ç»Ÿå¼€é”€
```

#### å‘é‡æ•°æ®å†…å­˜

```
å‘é‡æ•°æ®å†…å­˜ = å‘é‡æ•°é‡ Ã— å‘é‡ç»´åº¦ Ã— 4 å­—èŠ‚ (float32)
```

**ç¤ºä¾‹è®¡ç®—**ï¼š
- 100ä¸‡ä¸ª 768 ç»´å‘é‡ï¼š1,000,000 Ã— 768 Ã— 4 = ~2.9 GB
- 100ä¸‡ä¸ª 1536 ç»´å‘é‡ï¼š1,000,000 Ã— 1536 Ã— 4 = ~5.7 GB

#### HNSW ç´¢å¼•å†…å­˜

HNSW ç´¢å¼•é€šå¸¸éœ€è¦é¢å¤–çš„ 30-50% å†…å­˜å¼€é”€ï¼š

```
ç´¢å¼•å†…å­˜ â‰ˆ å‘é‡æ•°æ®å†…å­˜ Ã— 0.3 åˆ° 0.5
```

#### å®Œæ•´å†…å­˜ä¼°ç®—è¡¨

| å‘é‡æ•°é‡ | ç»´åº¦ | å‘é‡æ•°æ® | ç´¢å¼•å¼€é”€ | æ¨èæ€»å†…å­˜ |
|---------|------|---------|---------|-----------|
| 10,000 | 768 | ~29 MB | ~12 MB | 512 MB |
| 100,000 | 768 | ~290 MB | ~120 MB | 1 GB |
| 1,000,000 | 768 | ~2.9 GB | ~1.2 GB | 8 GB |
| 10,000,000 | 768 | ~29 GB | ~12 GB | 64 GB |
| 1,000,000 | 1536 | ~5.7 GB | ~2.3 GB | 16 GB |

### å†…å­˜ä¼˜åŒ–å»ºè®®

1. **é¢„ç•™å†…å­˜**: ä¸ºç³»ç»Ÿå’Œå…¶ä»–è¿›ç¨‹é¢„ç•™è‡³å°‘ 25% çš„å†…å­˜
2. **åˆ†æ‰¹å¯¼å…¥**: å¤§é‡æ•°æ®åˆ†æ‰¹å¯¼å…¥ï¼Œé¿å…å†…å­˜å³°å€¼
3. **ç›‘æ§ä½¿ç”¨**: ä½¿ç”¨ `/metrics` æ¥å£ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
4. **å®šæœŸé‡å»º**: å®šæœŸé‡å»ºç´¢å¼•ä»¥æ¸…ç†æ ‡è®°åˆ é™¤çš„å‘é‡

## ğŸ”§ è¿è¡Œæ—¶ä¾èµ–

### æ— å¤–éƒ¨ä¾èµ–

Scintirete æ˜¯ä¸€ä¸ª**é™æ€ç¼–è¯‘çš„å•äºŒè¿›åˆ¶æ–‡ä»¶**ï¼Œæ— éœ€å®‰è£…é¢å¤–çš„è¿è¡Œæ—¶ä¾èµ–ï¼š

- âœ… **æ— éœ€ Python ç¯å¢ƒ**
- âœ… **æ— éœ€ Go è¿è¡Œæ—¶**
- âœ… **æ— éœ€æ•°æ®åº“è½¯ä»¶**
- âœ… **æ— éœ€å¤æ‚çš„ç³»ç»Ÿåº“**

### å¯é€‰ä¾èµ–ï¼ˆç”¨äºé›†æˆåŠŸèƒ½ï¼‰

| åŠŸèƒ½ | ä¾èµ– | è¯´æ˜ |
|------|------|------|
| **Docker éƒ¨ç½²** | Docker 20.10+ | å®¹å™¨åŒ–éƒ¨ç½² |
| **ç›‘æ§é›†æˆ** | Prometheus, Grafana | å¯è§‚æµ‹æ€§æ ˆ |
| **æ–‡æœ¬å‘é‡åŒ–** | OpenAI API æˆ–å…¼å®¹æœåŠ¡ | è‡ªåŠ¨æ–‡æœ¬åµŒå…¥ |
| **åå‘ä»£ç†** | Nginx, Traefik ç­‰ | ç”Ÿäº§ç¯å¢ƒè´Ÿè½½å‡è¡¡ |

## ğŸŒ ç½‘ç»œè¦æ±‚

### ç«¯å£é…ç½®

| ç«¯å£ | åè®® | ç”¨é€” | é»˜è®¤å€¼ | å¯é…ç½® |
|------|------|------|--------|--------|
| **HTTP API** | TCP | RESTful API æœåŠ¡ | 8080 | âœ… |
| **gRPC** | TCP | gRPC æœåŠ¡ | 9090 | âœ… |
| **æŒ‡æ ‡ç›‘æ§** | TCP | Prometheus æŒ‡æ ‡ | 8080 (å†…ç½®) | âŒ |

### é˜²ç«å¢™é…ç½®

**æœ€å°é…ç½®**ï¼ˆä»…æœ¬åœ°è®¿é—®ï¼‰ï¼š
```bash
# å…è®¸æœ¬åœ°å›ç¯è®¿é—®
sudo ufw allow from 127.0.0.1
```

**å†…ç½‘æœåŠ¡é…ç½®**ï¼š
```bash
# å…è®¸å†…ç½‘è®¿é—® HTTP API
sudo ufw allow from 192.168.0.0/16 to any port 8080

# å…è®¸å†…ç½‘è®¿é—® gRPC
sudo ufw allow from 192.168.0.0/16 to any port 9090
```

**å…¬ç½‘æœåŠ¡é…ç½®**ï¼ˆä¸æ¨èï¼Œè¯·ä½¿ç”¨åå‘ä»£ç†å’Œ TLSï¼‰ï¼š
```bash
# è°¨æ…ï¼šåªåœ¨æœ‰é€‚å½“å®‰å…¨æªæ–½æ—¶å¼€æ”¾å…¬ç½‘è®¿é—®
sudo ufw allow 8080
sudo ufw allow 9090
```

### å¤–éƒ¨ç½‘ç»œéœ€æ±‚

å¦‚æœä½¿ç”¨æ–‡æœ¬å‘é‡åŒ–åŠŸèƒ½ï¼Œéœ€è¦è®¿é—® OpenAI APIï¼Œè¯·è‡ªè¡Œé…ç½® `base_url` å’Œ `api_key`

## ğŸ’¾ å­˜å‚¨è¦æ±‚

### ç£ç›˜ç©ºé—´è§„åˆ’

```
æ€»å­˜å‚¨éœ€æ±‚ = æ•°æ®æ–‡ä»¶ + æ—¥å¿—æ–‡ä»¶ + é…ç½®æ–‡ä»¶ + ç³»ç»Ÿå¼€é”€
```

#### æ•°æ®å­˜å‚¨ä¼°ç®—

| ç»„ä»¶ | å­˜å‚¨éœ€æ±‚ | è¯´æ˜ |
|------|---------|------|
| **RDB å¿«ç…§** | ~å†…å­˜æ•°æ®å¤§å° | å‹ç¼©åçš„æ•°æ®å¿«ç…§ |
| **AOF æ—¥å¿—** | å¯å˜ | æ“ä½œæ—¥å¿—ï¼Œå¯é…ç½®è½®è½¬ |
| **å…ƒæ•°æ®** | < 1% æ•°æ®å¤§å° | é›†åˆã€æ•°æ®åº“å…ƒä¿¡æ¯ |
| **ç³»ç»Ÿæ—¥å¿—** | å¯é…ç½® | ç»“æ„åŒ–æ—¥å¿—å’Œå®¡è®¡æ—¥å¿— |

#### å­˜å‚¨é…ç½®å»ºè®®

| æ•°æ®è§„æ¨¡ | æ¨èå­˜å‚¨ | å­˜å‚¨ç±»å‹ | IOPS è¦æ±‚ |
|---------|---------|---------|----------|
| **< 1GB æ•°æ®** | 10 GB | SSD | åŸºæœ¬ |
| **1-10GB æ•°æ®** | 100 GB | SSD | ä¸­ç­‰ |
| **10-100GB æ•°æ®** | 1 TB | NVMe SSD | é«˜ |
| **> 100GB æ•°æ®** | æ•°æ®å¤§å° Ã— 3 | ä¼ä¸šçº§ SSD | éå¸¸é«˜ |

### æ–‡ä»¶ç³»ç»Ÿå»ºè®®

| æ“ä½œç³»ç»Ÿ | æ¨èæ–‡ä»¶ç³»ç»Ÿ | å¤‡é€‰æ–¹æ¡ˆ |
|---------|-------------|----------|
| **Linux** | ext4, XFS | Btrfs, ZFS |
| **macOS** | APFS | HFS+ |
| **Windows** | NTFS | ReFS |

## ğŸ”’ å®‰å…¨è¦æ±‚

### ç½‘ç»œå®‰å…¨

1. **é˜²ç«å¢™**: é…ç½®é€‚å½“çš„é˜²ç«å¢™è§„åˆ™
2. **TLS**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS/TLS
3. **è®¤è¯**: é…ç½®å¼ºå¯†ç æˆ–å¯†é’¥è®¤è¯
4. **ç½‘ç»œéš”ç¦»**: å°†æ•°æ®åº“æœåŠ¡æ”¾ç½®åœ¨å—ä¿æŠ¤çš„ç½‘ç»œæ®µ

### æ–‡ä»¶ç³»ç»Ÿæƒé™

```bash
# åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆæ¨èï¼‰
sudo useradd -r -s /bin/false scintirete

# è®¾ç½®æ•°æ®ç›®å½•æƒé™
sudo mkdir -p /var/lib/scintirete
sudo chown scintirete:scintirete /var/lib/scintirete
sudo chmod 750 /var/lib/scintirete

# è®¾ç½®é…ç½®æ–‡ä»¶æƒé™
sudo chmod 640 /etc/scintirete/scintirete.toml
sudo chown root:scintirete /etc/scintirete/scintirete.toml
```

## ğŸš€ æ€§èƒ½è°ƒä¼˜

### ç³»ç»Ÿçº§ä¼˜åŒ–

#### Linux ç³»ç»Ÿå‚æ•°

```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
echo "* soft nofile 65536" >> /etc/security/limits.conf
echo "* hard nofile 65536" >> /etc/security/limits.conf

# ä¼˜åŒ–å†…å­˜ç®¡ç†
echo 'vm.swappiness = 1' >> /etc/sysctl.conf
echo 'vm.dirty_ratio = 15' >> /etc/sysctl.conf
echo 'vm.dirty_background_ratio = 5' >> /etc/sysctl.conf

# åº”ç”¨é…ç½®
sysctl -p
```

#### Docker ä¼˜åŒ–

```bash
# é™åˆ¶å®¹å™¨å†…å­˜ï¼ˆé˜²æ­¢ OOMï¼‰
docker run -m 4g scintirete/scintirete:latest

# ä½¿ç”¨æœ¬åœ° SSD å·
docker run -v /fast-ssd/scintirete:/app/data scintirete/scintirete:latest
```

### åº”ç”¨çº§ä¼˜åŒ–

1. **HNSW å‚æ•°è°ƒä¼˜**: å‚è€ƒ [HNSW è¶…å‚æ•°è°ƒæ•´](ä½¿ç”¨æŒ‡å—/3_HNSW_è¶…å‚æ•°è°ƒæ•´.md)
2. **æ‰¹é‡æ“ä½œ**: ä½¿ç”¨æ‰¹é‡æ’å…¥å’Œæœç´¢æ¥å£
3. **è¿æ¥æ± **: å®¢æˆ·ç«¯ä½¿ç”¨è¿æ¥æ± ç®¡ç†è¿æ¥
4. **ç›‘æ§è°ƒä¼˜**: åŸºäº Prometheus æŒ‡æ ‡è°ƒæ•´é…ç½®

## ğŸ“Š ç¯å¢ƒéªŒè¯

### ç³»ç»Ÿä¿¡æ¯æ£€æŸ¥

```bash
# æ£€æŸ¥ç³»ç»ŸåŸºæœ¬ä¿¡æ¯
uname -a
cat /etc/os-release

# æ£€æŸ¥ç¡¬ä»¶èµ„æº
free -h              # å†…å­˜
df -h               # ç£ç›˜ç©ºé—´
lscpu               # CPU ä¿¡æ¯
```

### ç½‘ç»œè¿é€šæ€§æµ‹è¯•

```bash
# æµ‹è¯•ç«¯å£å¯ç”¨æ€§
netstat -tuln | grep 8080
netstat -tuln | grep 9090

# æµ‹è¯•ç½‘ç»œå»¶è¿Ÿ
ping your-scintirete-server
```

## ğŸ”§ éƒ¨ç½²æ¨¡å¼å¯¹æ¯”

| éƒ¨ç½²æ¨¡å¼ | é€‚ç”¨åœºæ™¯ | èµ„æºè¦æ±‚ | å¤æ‚åº¦ |
|---------|----------|---------|--------|
| **å•æœºäºŒè¿›åˆ¶** | å¼€å‘ã€æµ‹è¯•ã€å°è§„æ¨¡ç”Ÿäº§ | æœ€ä½ | ç®€å• |
| **Docker å®¹å™¨** | æ ‡å‡†åŒ–éƒ¨ç½² | ä½ | ä¸­ç­‰ |
| **Docker Compose** | å¸¦ç›‘æ§çš„å®Œæ•´æ ˆ | ä¸­ç­‰ | ä¸­ç­‰ |
| **Kubernetes** | å¤§è§„æ¨¡ã€é«˜å¯ç”¨ | é«˜ | å¤æ‚ |

é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ¨¡å¼æ¥æ»¡è¶³ä½ çš„éœ€æ±‚å’Œèµ„æºçº¦æŸã€‚